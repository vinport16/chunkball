<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>chunkball</title>
  <!--link rel="stylesheet" href="css/main.css" /-->
</head>

<body>
  <h1>chunkball</h1>
  Username: <input type="text" id="playername" /><br>
  Color: <input type="color" id="playercolor" /><br>
  Game ID: <input type="text" id="gamecode" /><br>
  <hr>
  <a href="../client/index.html" id="hostlink">host a game</a><br>
  <a href="../client/index.html" id="joinlink">join a game</a><br>
  <br>
  Note: game host must keep browser tab active, otherwise the game will run extrememly slowly.<br>
  <br>
  <a href="../mapEditor/index.html">Create or Edit a Map</a><br>
</body>

<script type="text/javascript">

  var servingURL = new URL(document.getElementById("hostlink").href);
  var joiningURL = new URL(document.getElementById("joinlink").href);

  var nameinput = document.getElementById('playername');
  function setUserName() {
    servingURL.searchParams.set('username', nameinput.value);
    joiningURL.searchParams.set('username', nameinput.value);
    document.getElementById("hostlink").href = servingURL;
    document.getElementById("joinlink").href = joiningURL;
  };
  nameinput.onchange = setUserName;

  var colorinput = document.getElementById('playercolor');
  function setColor() {
    servingURL.searchParams.set('color', colorinput.value);
    joiningURL.searchParams.set('color', colorinput.value);
    document.getElementById("hostlink").href = servingURL;
    document.getElementById("joinlink").href = joiningURL;
  }
  colorinput.onchange = setColor;

  var gameidinput = document.getElementById('gamecode');
  function setGameID() {
    servingURL.searchParams.set('serving', gameidinput.value);
    joiningURL.searchParams.set('joining', gameidinput.value);
    
    let hostlnk = document.getElementById("hostlink");
    let joinlnk = document.getElementById("joinlink")
    
    if(gameidinput.value != ""){
      hostlnk.innerText = "host game: " + gameidinput.value;
      joinlnk.innerText = "join game: " + gameidinput.value;
    }else{
      hostlnk.innerText = "";
      joinlnk.innerText = "";
    }
    
    hostlnk.href = servingURL;
    joinlnk.href = joiningURL;
  };
  gameidinput.onchange = setGameID;

  setGameID();
  setColor();
  setUserName();

</script>

</html>